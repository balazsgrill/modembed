module main target microchip.pic18{

	instance microchip.pic18.PIC18F14K50 cpu;

	var counter1;
	var counter2;
	var data;

	func turnOn{
		MOVLB 0;
		INCF 1 1 data;
		MOVFF data cpu.PORTC;
		return 0;
	};

	func delay{
		MOVLB 0;
		label d;
		nop;
		call 0 delay1;
		nop;
		INCFSZ 1 1 counter2;
		goto d;
		return 0;
	};

	func delay1{
		MOVLB 0;
		label d;
		nop;
		nop;
		nop;
		INCFSZ 1 1 counter1;
		goto d;
		return 0;
	};

	/*
	 * Main function
	 */
	func main{
		//setup
		MOVLB 0xf;
		CLRF 1 cpu.TRISC;
		MOVLB 0;
		CLRF 1 counter1;
		CLRF 1 counter2;
		CLRF 1 data;
		label start;
		call 0 turnOn;
		call 0 delay;
		GOTO start;
		return 0;
	};
}
