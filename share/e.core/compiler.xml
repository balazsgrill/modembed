<?xml version="1.0" encoding="UTF-8"?>
<project name="compiler">
	
	<dirname property="included.basedir" file="${ant.file.compiler}"/>
	<echo>${ant.file.compiler}</echo>
	
	<!-- = = = = = = = = = = = = = = = = =
          macrodef: compiler.assemble          
         = = = = = = = = = = = = = = = = = -->
    <macrodef name="compiler.assemble">
        <attribute name="input" />
    	<attribute name="output" />
        <sequential>
        	<epsilon.etl src="${included.basedir}/compiler.assemble.etl">
        		<model ref="@{input}" as="asm"/>
        		<model ref="@{output}" as="hex"/>
        	</epsilon.etl>
        </sequential>
    </macrodef>

	<macrodef name="compiler.disassemble">
		<attribute name="instructionSet" />
		<attribute name="input" />
		<attribute name="output" />
		<sequential>
			<echo>${included.basedir}/</echo>
			<epsilon.eol src="${included.basedir}/disassemble.eol">
				<model ref="@{instructionSet}" as="instructionSet"/>
				<model ref="@{input}" as="hexFile"/>
				<model ref="@{output}" as="output"/>
			</epsilon.eol>
		</sequential>
	</macrodef>
	

</project>